@using PhPopovich.Models
@inject Context DbContext
@model PhPopovich.ViewModels.Projects.ProjectPageViewModel

@{
    Layout = "_Layout";
    var firstImage = Model.ProjectModel.Images.FirstOrDefault(); 
}

@if (Model.ProjectModel.Images.Count == 0)
{
    <table style="height: 600px" class="w-100">
        <tbody>
            <tr>
                <td class="align-middle text-center">
                    <h2>
                        Пока тут ничего нет
                    </h2> 
                </td>
            </tr>
        </tbody>
    </table>
}
else
{
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            @for(var i = 0; i < Model.ProjectModel.Images.Count; i++)
            {
                <li data-target="#carouselExampleIndicators" data-slide-to="@i" @(i == 0 ? "class=active" : "")></li>
            }
        </ol>
        <div class="carousel-inner">
            @foreach (var image in Model.ProjectModel.Images)
            {
                <div class="carousel-item @(image == firstImage ? "active" : "")">
                    <img class="d-block w-100" src="@image?.Url" >
                </div>
            }
        </div>
        
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev" onclick="$('#carouselExampleIndicators').carousel('prev')">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next" onclick="$('#carouselExampleIndicators').carousel('next')">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
}

